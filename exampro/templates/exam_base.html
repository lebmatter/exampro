{% extends "templates/web.html" %} {% block head_include %} {{ super() }}
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
/>
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"
></script>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
  crossorigin="anonymous"
></script>

<style>
  .user-email-display {
    color: #6c757d;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
  }
  .user-email-display i {
    margin-right: 5px;
  }

  /* Style for navigation links */
  .navbar-nav .nav-link {
    display: flex;
    align-items: center;
    transition: color 0.2s ease;
    font-size: 1.1rem;
  }

  .navbar-nav .nav-link:hover {
    color: #0056b3;
  }

  .navbar-nav .nav-link i {
    margin-right: 5px;
  }

  /* Alternative CSS-only approach to hide avatar and show email */
  .avatar-image,
  .avatar-frame {
    display: none !important;
  }

  .navbar .dropdown-toggle::after {
    content: none;
  }

  .navbar .navbar-nav .nav-item.active {
    border-bottom: 2px solid #f5c344ff;
  }
</style>
{% endblock %} {% block navbar %}
<nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
  <div class="container">
    <div class="d-flex w-100 justify-content-between align-items-center">
      <div class="d-flex align-items-center">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            {% if frappe.session.user != "Guest" %}
            <!-- Dashboard link for all users -->
            <li class="nav-item">
              <a class="nav-link" href="/my-exams">Dashboard</a>
            </li>
            {% if is_proctor %}
            <li class="nav-item">
              <a class="nav-link" href="/proctor">Proctor Exams</a>
            </li>
            {% endif %} {% if is_evaluator %}
            <li class="nav-item">
              <a class="nav-link" href="/evaluate">Evaluate Exams</a>
            </li>
            {% endif %} {% if is_manager %}
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Manage
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="/app/exam">Exam</a></li>
                <li>
                  <a class="dropdown-item" href="/app/exam-schedule"
                    >Exam Schedule</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/app/exam-submission"
                    >Exam Submission</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/app/exam-batch">Exam Batch</a>
                </li>
                <li>
                  <a class="dropdown-item" href="/app/exam-question"
                    >Exam Question</a
                  >
                </li>
              </ul>
            </li>
            {% endif %} {% endif %}
          </ul>
        </div>
      </div>
      <div>
        <ul class="navbar-nav">
          {% if frappe.session.user != "Guest" %}
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle user-email-display"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
            >
              <i class="bi bi-person-circle"></i>
              {{ frappe.session.user }}
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="/logout">Logout</a></li>
            </ul>
          </li>
          {% else %}
          <li class="nav-item">
            <a class="nav-link" href="/login">Login</a>
          </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </div>
</nav>
{% endblock %} {% block content %} {% block page_content %} Hello, world! {%
endblock %} {% endblock %} {%- block script -%} {{ super() }} {% if
frappe.get_system_settings("enable_telemetry") %} {% set telemetry_boot_info =
get_telemetry_boot_info() %}
<script>
  const telemetry_boot_info = {{ get_telemetry_boot_info() }}
  if (telemetry_boot_info && Object.keys(telemetry_boot_info).length)
  Object.assign(frappe.boot, telemetry_boot_info)
</script>
{% endif %} {{ include_script("telemetry.bundle.js") }}

<script>
  // Replace avatar with email display
  $(document).ready(function () {
    // Find avatar elements and replace with email
    $(".avatar-image, .avatar-frame").each(function () {
      const userEmail = frappe.session.user;
      if (userEmail && userEmail !== "Guest") {
        $(this).replaceWith(`
                <span class="user-email-display">
                    <i class="bi bi-person-circle"></i>
                    ${userEmail}
                </span>
            `);
      }
    });

    // Alternative: modify existing dropdown text
    $(".navbar .dropdown-toggle").each(function () {
      const $this = $(this);
      if ($this.find(".avatar-image").length > 0) {
        $this.html(`
                <i class="bi bi-person-circle"></i>
                ${frappe.session.user}
                <span class="caret"></span>
            `);
      }
    });

    // Set active navigation item based on current URL
    const currentPath = window.location.pathname;
    $('.navbar-nav .nav-item').removeClass('active');
    
    // Map URLs to navigation items
    if (currentPath === '/my-exams' || currentPath === '/') {
      $('a[href="/my-exams"]').closest('.nav-item').addClass('active');
    } else if (currentPath === '/proctor') {
      $('a[href="/proctor"]').closest('.nav-item').addClass('active');
    } else if (currentPath === '/evaluate') {
      $('a[href="/evaluate"]').closest('.nav-item').addClass('active');
    }
  });
</script>
{%- endblock -%} {% block footer %}
<footer class="web-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="d-flex align-items-center justify-content-between">
          <div class="footer-logo">
            <a href="https://lebmatter.github.io/exampro/" target="_blank">
              <img
                src="/assets/exampro/img/exampro-logo.png"
                alt="ExamPro Logo"
                class="img-fluid"
                style="max-height: 20px"
              />
            </a>
          </div>
          <div class="footer-credit text-end">
            Built on
            <a href="https://frappeframework.com" target="_blank">Frappe</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
{% endblock %}
